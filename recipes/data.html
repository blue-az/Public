<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Model | Recipes</title>
    <meta name="description" content="Plant-based cookbook source and derived v1 JSON tables for recipe tooling.">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="header">
        <div class="header-top">
            <a href="https://proto.efehnconsulting.com/project-phoenix/">Part of Project Phoenix - tau-bench Domain</a>
        </div>
        <div class="header-main">
            <a href="index.html" class="logo">
                <span class="logo-icon">&#127869;</span>
                <span class="logo-text">Recipes</span>
            </a>
            <nav class="header-nav">
                <a href="index.html">Home</a>
                <a href="categories.html">Categories</a>
                <a href="tools.html">Tools</a>
                <a href="meal-planning.html">Meal Planning</a>
                <a href="data.html" class="active">Data Model</a>
                <a href="variations.html">Variations</a>
            </nav>
        </div>
    </header>

    <div class="hero">
        <h1>Data Model</h1>
        <p class="subtitle">Plant-Based Source of Truth + Derived v1 JSON</p>
    </div>

    <main class="main-container">
        <section class="section">
            <h2>Data Pipeline</h2>
            <div class="code-block">
plant-based-cookbook.md  -->  parse_cookbook.py  -->  data/v1/*.json
     (source of truth)           (parser)            (derived data)

<span class="comment"># Regenerate JSON from markdown</span>
cd domains/Recipes
python scripts/parse_cookbook.py

<span class="comment"># Dry run</span>
python scripts/parse_cookbook.py --dry-run
            </div>
        </section>

        <section class="section">
            <h2>v1 Tables</h2>
            <table class="data-table">
                <thead>
                    <tr><th>Table</th><th>Purpose</th></tr>
                </thead>
                <tbody>
                    <tr><td>categories</td><td>Recipe categories</td></tr>
                    <tr><td>recipes</td><td>Recipe metadata and method steps</td></tr>
                    <tr><td>ingredients</td><td>Ingredient definitions</td></tr>
                    <tr><td>recipe_ingredients</td><td>Recipe-ingredient mapping</td></tr>
                    <tr><td>techniques</td><td>Technique reference entries</td></tr>
                    <tr><td>meal_plans</td><td>V2 runtime meal plans</td></tr>
                    <tr><td>favorites</td><td>V4 favorite recipes</td></tr>
                    <tr><td>cook_history</td><td>V4 cook events</td></tr>
                    <tr><td>recipe_notes</td><td>V4 personal notes</td></tr>
                    <tr><td>recipe_ratings</td><td>V4 ratings</td></tr>
                    <tr><td>recipe_workflow</td><td>V5 equipment/time/prep/make-ahead data</td></tr>
                </tbody>
            </table>
        </section>

        <section class="section">
            <h2>Core Fields</h2>
            <ul>
                <li><code>recipes.recipe_id</code>, <code>recipe_title</code>, <code>category_id</code>, <code>cuisine</code>, <code>method_steps_json</code></li>
                <li><code>ingredients.ingredient_id</code>, <code>ingredient_name</code>, <code>ingredient_name_normalized</code></li>
                <li><code>recipe_ingredients.recipe_id</code>, <code>ingredient_id</code>, <code>quantity_primary</code>, <code>unit_primary</code></li>
            </ul>
        </section>

        <section class="section">
            <h2>Data Maintenance</h2>
            <div class="code-block">
<span class="comment"># Import conversation recipes</span>
./scripts/recipes import --source data/more_reciples.txt --write

<span class="comment"># Validate strict</span>
python scripts/validate_recipe_data.py --strict

<span class="comment"># One-command pipeline</span>
python scripts/recipes_maintenance.py --write
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="footer-content">
            <div>
                <h4>Recipes Domain</h4>
                <a href="index.html">Home</a>
                <a href="categories.html">Browse Recipes</a>
                <a href="tools.html">Tool Registry</a>
            </div>
            <div>
                <h4>Resources</h4>
                <a href="data.html">Data Model</a>
                <a href="variations.html">Variations</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>Recipes Domain - Project Phoenix | Built on tau-bench (MIT License)</p>
        </div>
    </footer>
</body>
</html>
