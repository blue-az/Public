<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Variations | Portfolio Agent</title>
    <meta name="description" content="4 progressive variations from core analytics to complete investment toolkit.">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="page">
        <header class="header">
            <div class="badge">Project Phoenix Domain</div>
            <h1>Portfolio Variations</h1>
            <p class="subtitle">4 Progressive Configurations</p>
        </header>

        <nav class="nav">
            <a href="index.html">Home</a>
            <a href="tools.html">Tools</a>
            <a href="features.html">Features</a>
            <a href="variations.html" class="active">Variations</a>
            <a href="https://proto.efehnconsulting.com/project-phoenix/">Phoenix</a>
        </nav>

        <section class="section">
            <h2>Variation Overview</h2>
            <p>Portfolio Agent provides 4 progressive variations, each building on the previous with additional capabilities for more advanced use cases.</p>

            <div class="variation-grid">
                <div class="variation-card">
                    <div class="num">33</div>
                    <h4>V1: Core</h4>
                    <p>Holdings & history</p>
                </div>
                <div class="variation-card">
                    <div class="num">42</div>
                    <h4>V2: Advisor</h4>
                    <p>Risk + tax</p>
                </div>
                <div class="variation-card">
                    <div class="num">53</div>
                    <h4>V3: Options</h4>
                    <p>Options workflows</p>
                </div>
                <div class="variation-card">
                    <div class="num">70</div>
                    <h4>V4: Complete</h4>
                    <p>Monitoring + analytics</p>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Variation 1: Core Analytics (33 tools)</h2>
            <div class="badge">Holdings, Allocation, Performance, History</div>
            <p>Essential tools for portfolio analysis covering holdings, allocation, performance, comparisons, model portfolios, and historical tracking.</p>
            <h3>Categories</h3>
            <ul>
                <li><strong>Holdings</strong> (5): list_holdings, get_position_detail, get_top_performers, get_losers, show_capabilities</li>
                <li><strong>Allocation</strong> (3): get_asset_allocation, get_sector_breakdown, visualize_allocation</li>
                <li><strong>Performance</strong> (3): get_portfolio_performance, get_position_performance, visualize_gains</li>
                <li><strong>Income</strong> (3): get_dividend_income, get_position_yield, visualize_income</li>
                <li><strong>Summary</strong> (1): get_portfolio_summary</li>
                <li><strong>Comparison</strong> (6): compare_positions, position_vs_sector, portfolio_vs_benchmark, rebalance_scenario, add_position_scenario, rank_positions</li>
                <li><strong>Model</strong> (6): get_model_portfolios, compare_to_model, allocate_to_model, hypothetical_reallocation, allocation_stress_test, visualize_allocation_comparison</li>
                <li><strong>History</strong> (6): get_snapshots, get_portfolio_history, get_position_history, compare_periods, get_position_changes, visualize_portfolio_trend</li>
            </ul>
            <h3>Use Cases</h3>
            <ul>
                <li>Basic portfolio review and analysis</li>
                <li>Performance tracking over time</li>
                <li>Benchmark comparison</li>
                <li>Model portfolio alignment</li>
            </ul>
        </section>

        <section class="section">
            <h2>Variation 2: Advisor + Tax (42 tools)</h2>
            <div class="badge">V1 + Risk Assessment + Tax Optimization</div>
            <p>All V1 tools plus risk-based recommendations and comprehensive tax optimization.</p>
            <h3>V1 Tools (33)</h3>
            <p class="meta">All tools from V1 included</p>
            <h3>V2 Additional Tools (9)</h3>
            <ul>
                <li><strong>Advisor</strong> (4): assess_risk, get_recommendations, optimize_for_goal, explain_recommendation</li>
                <li><strong>Tax</strong> (5): set_tax_profile, get_tax_summary, find_harvest_opportunities, calculate_sale_tax, get_tax_efficient_moves</li>
            </ul>
            <h3>Use Cases</h3>
            <ul>
                <li>Risk-adjusted portfolio management</li>
                <li>Tax-loss harvesting</li>
                <li>Tax-efficient rebalancing</li>
                <li>Goal-based optimization</li>
            </ul>
        </section>

        <section class="section">
            <h2>Variation 3: Options (53 tools)</h2>
            <div class="badge">V2 + Options Workflows</div>
            <p>All V2 tools plus comprehensive options trading capabilities.</p>
            <h3>V2 Tools (42)</h3>
            <p class="meta">All tools from V2 included</p>
            <h3>V3 Additional Tools (11)</h3>
            <ul>
                <li><strong>Options</strong> (10): set_options_profile, get_options_approval, find_covered_call_opportunities, find_cash_secured_put_opportunities, calculate_options_income, build_options_strategy, options_tutorial, track_options_position, select_strike_expiration, get_roll_opportunities</li>
                <li><strong>Reference</strong> (1): options_reference</li>
            </ul>
            <h3>Use Cases</h3>
            <ul>
                <li>Options income generation</li>
                <li>Covered call writing</li>
                <li>Cash-secured put selling</li>
                <li>Strategy building and education</li>
            </ul>
        </section>

        <section class="section">
            <h2>Variation 4: Complete (70 tools)</h2>
            <div class="badge primary">V3 + Monitoring + Cross-Pollination</div>
            <p>Full capability set with watchlist monitoring and cross-pollinated analytics from other domains.</p>
            <h3>V3 Tools (53)</h3>
            <p class="meta">All tools from V3 included</p>
            <h3>V4 Additional Tools (17)</h3>
            <ul>
                <li><strong>Alerts</strong> (5): add_to_watchlist, get_watchlist, remove_from_watchlist, check_alerts, set_alert_preferences</li>
                <li><strong>Cross-Pollinated</strong> (2): detect_unusual_returns (YieldModel), calculate_sector_concentration (PPR_Agent)</li>
            </ul>
            <h3>Use Cases</h3>
            <ul>
                <li>Active portfolio monitoring</li>
                <li>Price target tracking</li>
                <li>Outlier detection</li>
                <li>Concentration risk analysis</li>
            </ul>
        </section>

        <section class="section">
            <h2>Tool Distribution Summary</h2>
            <table class="table">
                <thead>
                    <tr>
                        <th>Category</th>
                        <th>Tools</th>
                        <th>V1</th>
                        <th>V2</th>
                        <th>V3</th>
                        <th>V4</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Holdings</td>
                        <td>5</td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                    </tr>
                    <tr>
                        <td>Allocation</td>
                        <td>3</td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                    </tr>
                    <tr>
                        <td>Performance</td>
                        <td>3</td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                    </tr>
                    <tr>
                        <td>Income</td>
                        <td>3</td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                    </tr>
                    <tr>
                        <td>Summary</td>
                        <td>1</td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                    </tr>
                    <tr>
                        <td>Comparison</td>
                        <td>6</td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                    </tr>
                    <tr>
                        <td>Model</td>
                        <td>6</td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                    </tr>
                    <tr>
                        <td>History</td>
                        <td>6</td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                    </tr>
                    <tr>
                        <td>Advisor</td>
                        <td>4</td>
                        <td>-</td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                    </tr>
                    <tr>
                        <td>Tax</td>
                        <td>5</td>
                        <td>-</td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                    </tr>
                    <tr>
                        <td>Options</td>
                        <td>10</td>
                        <td>-</td>
                        <td>-</td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                    </tr>
                    <tr>
                        <td>Reference</td>
                        <td>1</td>
                        <td>-</td>
                        <td>-</td>
                        <td><span class="highlight">Yes</span></td>
                        <td><span class="highlight">Yes</span></td>
                    </tr>
                    <tr>
                        <td>Alerts</td>
                        <td>5</td>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                        <td><span class="highlight">Yes</span></td>
                    </tr>
                    <tr>
                        <td>Cross-Pollinated</td>
                        <td>2</td>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                        <td><span class="highlight">Yes</span></td>
                    </tr>
                    <tr>
                        <td><strong>Total</strong></td>
                        <td><strong>60</strong></td>
                        <td><strong>33</strong></td>
                        <td><strong>42</strong></td>
                        <td><strong>53</strong></td>
                        <td><strong>70</strong></td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section class="section">
            <h2>Database Schema</h2>
            <div class="code"><span class="highlight-secondary"># Snapshots metadata</span>
snapshots(snapshot_date PRIMARY KEY, source_file, loaded_at, total_value, position_count)

<span class="highlight-secondary"># Holdings (7 positions per snapshot)</span>
holdings(id, snapshot_date, ticker, name, shares, cost_basis, total_cost, current_price,
         market_value, unrealized_gain, unrealized_gain_pct, gain_type, sector,
         UNIQUE(snapshot_date, ticker))

<span class="highlight-secondary"># Asset Allocation (3 classes per snapshot)</span>
asset_allocation(id, snapshot_date, asset_class, market_value, percentage,
                 UNIQUE(snapshot_date, asset_class))

<span class="highlight-secondary"># Income (6 records per snapshot)</span>
income(id, snapshot_date, ticker, income_type, annual_income, yield_pct,
       UNIQUE(snapshot_date, ticker))

<span class="highlight-secondary"># Options positions</span>
options_positions(id, ticker, strategy, option_type, strike, expiration,
                  contracts, premium_received, premium_paid, opened_date,
                  status, closed_date, close_price, realized_pnl, notes)</div>
        </section>

        <section class="section">
            <h2>Running the Agent</h2>
            <div class="code"><span class="highlight-secondary"># Run the Portfolio Agent GUI</span>
cd project-phoenix/domains/Portfolio/cockpit_poc/agent/tests
python test_agent.py

<span class="highlight-secondary"># Rebuild database from PDF statements</span>
cd project-phoenix/domains/Portfolio/scripts
python pdf_parser.py

<span class="highlight-secondary"># Validate variations</span>
python scripts/validate.py --variation v1
python scripts/validate.py --variation v2
python scripts/validate.py --variation v3
python scripts/validate.py --variation v4</div>
        </section>

        <footer class="footer">
            <p>Portfolio Domain - Project Phoenix | Investment Analysis Agent</p>
            <a href="index.html" class="back-link">Back to Portfolio Home</a>
        </footer>
    </div>
</body>
</html>
